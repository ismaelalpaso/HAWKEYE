{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ismaa\\\\Desktop\\\\HAWKEYE_SOFTWARE\\\\hawkeye_backend\\\\frontend\\\\src\\\\components\\\\NewActivityForm.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport api from \"../api\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewActivityForm({\n  clienteId = null,\n  onCreated = null\n}) {\n  _s();\n  const [tipo, setTipo] = useState(\"Visita\");\n  const [estado, setEstado] = useState(\"En proceso\");\n  const [descripcion, setDescripcion] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [enviando, setEnviando] = useState(false);\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    setEnviando(true);\n    const ahora = new Date().toISOString();\n    const payload = {\n      tipo,\n      estado,\n      descripcion_empleado: descripcion,\n      descripcion_publica: \"\",\n      fecha_inicio: ahora,\n      fecha_fin: ahora,\n      cliente: clienteId || null\n    };\n    try {\n      const token = localStorage.getItem(\"access_token\");\n      if (!token) {\n        setError(\"No estás autenticado.\");\n        setEnviando(false);\n        return;\n      }\n      await api.post(\"/actividades/\", payload, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (onCreated) onCreated(); // para refrescar lista si se usa como modal\n      else navigate(-1); // vuelve atrás si se accede directamente\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || \"Error al crear la actividad.\");\n    } finally {\n      setEnviando(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"bg-white p-6 rounded shadow space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-lg font-semibold\",\n      children: \"Nueva Actividad\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm font-medium\",\n        children: \"Tipo de actividad\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: tipo,\n        onChange: e => setTipo(e.target.value),\n        className: \"w-full mt-1 border rounded px-3 py-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Adquisici\\xF3n\",\n          children: \"Adquisici\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Visita\",\n          children: \"Visita\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Llamada\",\n          children: \"Llamada\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Contacto directo\",\n          children: \"Contacto directo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm font-medium\",\n        children: \"Estado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: estado,\n        onChange: e => setEstado(e.target.value),\n        className: \"w-full mt-1 border rounded px-3 py-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Realizada\",\n          children: \"Realizada\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"No realizada\",\n          children: \"No realizada\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"En proceso\",\n          children: \"En proceso\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm font-medium\",\n        children: \"Descripci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: descripcion,\n        onChange: e => setDescripcion(e.target.value),\n        rows: 4,\n        className: \"w-full mt-1 border rounded px-3 py-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-600\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: enviando,\n      className: \"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",\n      children: enviando ? \"Guardando...\" : \"Crear actividad\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(NewActivityForm, \"vua1oEII8RkTSHFPU7VKwTd8J08=\", false, function () {\n  return [useNavigate];\n});\n_c = NewActivityForm;\nvar _c;\n$RefreshReg$(_c, \"NewActivityForm\");","map":{"version":3,"names":["useState","api","useNavigate","jsxDEV","_jsxDEV","NewActivityForm","clienteId","onCreated","_s","tipo","setTipo","estado","setEstado","descripcion","setDescripcion","error","setError","enviando","setEnviando","navigate","handleSubmit","e","preventDefault","ahora","Date","toISOString","payload","descripcion_empleado","descripcion_publica","fecha_inicio","fecha_fin","cliente","token","localStorage","getItem","post","headers","Authorization","err","_err$response","_err$response$data","console","response","data","detail","onSubmit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","rows","type","disabled","_c","$RefreshReg$"],"sources":["C:/Users/ismaa/Desktop/HAWKEYE_SOFTWARE/hawkeye_backend/frontend/src/components/NewActivityForm.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport api from \"../api\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function NewActivityForm({ clienteId = null, onCreated = null }) {\r\n  const [tipo, setTipo] = useState(\"Visita\");\r\n  const [estado, setEstado] = useState(\"En proceso\");\r\n  const [descripcion, setDescripcion] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [enviando, setEnviando] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setEnviando(true);\r\n\r\n    const ahora = new Date().toISOString();\r\n\r\n    const payload = {\r\n      tipo,\r\n      estado,\r\n      descripcion_empleado: descripcion,\r\n      descripcion_publica: \"\",\r\n      fecha_inicio: ahora,\r\n      fecha_fin: ahora,\r\n      cliente: clienteId || null,\r\n    };\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"access_token\");\r\n      if (!token) {\r\n        setError(\"No estás autenticado.\");\r\n        setEnviando(false);\r\n        return;\r\n      }\r\n\r\n      await api.post(\"/actividades/\", payload, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (onCreated) onCreated(); // para refrescar lista si se usa como modal\r\n      else navigate(-1); // vuelve atrás si se accede directamente\r\n\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err.response?.data?.detail || \"Error al crear la actividad.\");\r\n    } finally {\r\n      setEnviando(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow space-y-4\">\r\n      <h2 className=\"text-lg font-semibold\">Nueva Actividad</h2>\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Tipo de actividad</label>\r\n        <select\r\n          value={tipo}\r\n          onChange={(e) => setTipo(e.target.value)}\r\n          className=\"w-full mt-1 border rounded px-3 py-2\"\r\n        >\r\n          <option value=\"Adquisición\">Adquisición</option>\r\n          <option value=\"Visita\">Visita</option>\r\n          <option value=\"Llamada\">Llamada</option>\r\n          <option value=\"Contacto directo\">Contacto directo</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Estado</label>\r\n        <select\r\n          value={estado}\r\n          onChange={(e) => setEstado(e.target.value)}\r\n          className=\"w-full mt-1 border rounded px-3 py-2\"\r\n        >\r\n          <option value=\"Realizada\">Realizada</option>\r\n          <option value=\"No realizada\">No realizada</option>\r\n          <option value=\"En proceso\">En proceso</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium\">Descripción</label>\r\n        <textarea\r\n          value={descripcion}\r\n          onChange={(e) => setDescripcion(e.target.value)}\r\n          rows={4}\r\n          className=\"w-full mt-1 border rounded px-3 py-2\"\r\n        />\r\n      </div>\r\n\r\n      {error && <p className=\"text-red-600\">{error}</p>}\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={enviando}\r\n        className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n      >\r\n        {enviando ? \"Guardando...\" : \"Crear actividad\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}